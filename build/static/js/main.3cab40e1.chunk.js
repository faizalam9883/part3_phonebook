(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),u=t(14),a=t.n(u),o=t(3),i=function(e){var n=e.person,t=e.onClick;return Object(c.jsxs)("li",{children:[n.name," ",n.number,"  ",Object(c.jsx)("button",{onClick:t,children:"delete"})]},n.name)},l=function(e){var n=e.value,t=e.onChange;return Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{value:n,onChange:t})]})},s=function(e){return Object(c.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(c.jsxs)("div",{children:["name:"," ",Object(c.jsx)("input",{value:e.newName,onChange:e.handleName})]}),Object(c.jsxs)("div",{children:["number:"," ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleNumber})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.msg;return null===n?null:Object(c.jsx)("div",{className:"message",children:n})},j=function(e){var n=e.msg;return null===n?null:Object(c.jsx)("div",{className:"error",children:n})},b=t(4),f=t.n(b),h="https://serene-hamlet-71867.herokuapp.com/api/persons",m={getAll:function(){return f.a.get(h).then((function(e){return e.data}))},create:function(e){return f.a.post(h,e).then((function(e){return e.data}))},deleteID:function(e){return f.a.delete("".concat(h,"/").concat(e))},update:function(e,n){return f.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))}},O=(t(37),function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],a=Object(r.useState)(""),b=Object(o.a)(a,2),f=b[0],h=b[1],O=Object(r.useState)(""),v=Object(o.a)(O,2),p=v[0],x=v[1],w=Object(r.useState)(""),g=Object(o.a)(w,2),N=g[0],k=g[1],C=Object(r.useState)(null),S=Object(o.a)(C,2),y=S[0],A=S[1],D=Object(r.useState)(null),I=Object(o.a)(D,2),T=I[0],E=I[1];Object(r.useEffect)((function(){m.getAll().then((function(e){return u(e)}))}),[]);var J;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(d,{msg:y}),Object(c.jsx)(j,{msg:T}),Object(c.jsx)(l,{value:N,onChange:function(e){k(e.target.value)}}),Object(c.jsx)("h2",{children:"Add a new"}),Object(c.jsx)(s,{onSubmit:function(e){e.preventDefault();var n=0,c=0;if(t.forEach((function(e){e.name!==f&&f||(n++,c=e.id)})),n>0){if(window.confirm("".concat(f," is already added to phonebook, replace the old number with the new one?"))){var r={name:f,number:p};m.update(c,r).then((function(e){u(t.map((function(n){return n.id!==c?n:e}))),A("Updated ".concat(e.name)),setTimeout((function(){A(null)}),3500),h(""),x("")})).catch((function(e){E("Information of ".concat(r.name," has already been removed from server")),setTimeout((function(){E(null)}),3500),h(""),x(""),u(t.filter((function(e){return e.id!==c})))}))}}else{var a={name:f,number:p};m.create(a).then((function(e){u(t.concat(e)),A("Added ".concat(e.name)),setTimeout((function(){A(null)}),3500),h(""),x("")}))}},newName:f,handleName:function(e){h(e.target.value)},newNumber:p,handleNumber:function(e){x(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)("ul",{children:(J=t,J.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}))).map((function(e){return Object(c.jsx)(i,{person:e,onClick:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ?"))&&m.deleteID(e).then((function(){u(t.filter((function(n){return n.id!==e})))}))}(e.id)}},e.id)}))})]})});a.a.render(Object(c.jsx)(O,{}),document.querySelector("#root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.3cab40e1.chunk.js.map